var alm_seo={init:!0,paging:!1};alm_seo.previousUrl=window.location.href,alm_seo.isAnimating=!1,alm_seo.defaultPage=1,alm_seo.fromPopstate=!1,alm_seo.HTMLHead=document.getElementsByTagName("head")[0].innerHTML,alm_seo.nested=!1,alm_seo.timer=null,window.almSEO=function(e,o){if(!e.addons.seo)return!1;alm_seo.nested="true"===e.main.dataset.nested,alm_seo.seo_scroll=void 0===e.addons.seo_scroll?"false":e.addons.seo_scroll,alm_seo.scroll="true"===e.addons.seo_scroll,alm_seo.canonical_url=e.canonical_url,alm_seo.slug=e.slug,alm_seo.permalink=e.addons.seo_permalink,alm_seo.postsPerPage=e.posts_per_page,alm_seo.totalposts=e.totalposts,alm_seo.totalposts=e.addons.preloaded_amount?parseInt(e.addons.preloaded_amount)+alm_seo.totalposts:alm_seo.totalposts,alm_seo.totalpages=Math.ceil(alm_seo.totalposts/alm_seo.postsPerPage),alm_seo.preloaded="true"===e.addons.preloaded,alm_seo.scrolltop=parseInt(e.addons.seo_scrolltop),alm_seo.controls=e.addons.seo_controls,alm_seo.controls="1"===alm_seo.controls,alm_seo.newPath="",alm_seo.paging=e.addons.paging,alm_seo.content=e.listing,alm_seo.trailingslash="false"===alm_seo.content.dataset.seoTrailingSlash?"":"/",alm_seo.leadingslash="true"===alm_seo.content.dataset.seoLeadingSlash?"/":"",alm_seo.first=alm_seo.content.querySelector(".alm-seo:first-child"),void 0===e.is_search&&(e.is_search=!1),alm_seo.search_value="true"===e.is_search?alm_seo.slug:"";var a=e.page+1,t=alm_seo.preloaded?e.page+3:e.page+2,l=alm_seo.preloaded?0:1;if(t=o?e.page+2:t,alm_seo.newPath=alm_seo.getURL(a,l,alm_seo.permalink),alm_seo.nextPath=alm_seo.getURL(t,l,alm_seo.permalink),o)return alm_seo.init=!1,!1;a>=1&&!alm_seo.paging&&(alm_seo.scroll||alm_seo.init)&&(alm_seo.preloaded?(alm_seo.init&&e.start_page>0||alm_seo.scroll)&&alm_seo.scrollToPage(a+1):a>1&&alm_seo.scrollToPage(a)),alm_seo.paging&&alm_seo.init&&(alm_seo.defaultPage=a,alm_seo.preloaded&&(alm_seo.defaultPage=parseInt(alm_seo.content.dataset.seoStartPage)+1)),alm_seo.paging&&(alm_seo.fromPopstate?alm_seo.fromPopstate=!1:alm_seo.setURL(a,alm_seo.newPath)),alm_seo.init&&(alm_seo.preloaded?alm_seo.getRelLinks(a+1,alm_seo.nextPath):alm_seo.getRelLinks(a,alm_seo.nextPath)),setTimeout((function(){alm_seo.init=!1}),250)},alm_seo.getURL=function(e,o,a){var t,l=window.location.search;if("default"===alm_seo.permalink){var s=alm_seo.cleanURL(window.location.toString());t=""!==l&&e>o?alm_seo.getQueryVariable("paged")?s.replace(/(paged=)[^\&]+/,"$1"+e):s+"&paged="+e:e>1?s+"?paged="+e:s}else t=1===e?alm_seo.canonical_url+l:alm_seo.canonical_url+alm_seo.leadingslash+"page/"+e+alm_seo.trailingslash+l;return t},alm_seo.onScroll=function(){var e=window.pageYOffset;alm_seo.isAnimating||alm_seo.paging||alm_seo.init||(alm_seo.timer&&window.clearTimeout(alm_seo.timer),alm_seo.timer=window.setTimeout((function(){var o=e+alm_seo.scrolltop,a=document.querySelectorAll(".alm-seo"),t=window.location.href,l=Array.prototype.filter.call(a,(function(e,a){if("function"==typeof ajaxloadmore.getOffset&&ajaxloadmore.getOffset(e).top<o)return e})),s=l[l.length-1],n=s?s.dataset.url:"",m=s?s.dataset.page:"";void 0!==m&&""!==m||(m=alm_seo.first.dataset.page,n=alm_seo.first.dataset.url),t!==n&&alm_seo.setURL(m,n)}),15))},window.addEventListener("touchstart",alm_seo.onScroll),window.addEventListener("scroll",alm_seo.onScroll),alm_seo.setURL=function(e,o){if(alm_seo.nested)return!1;var a={page:e,permalink:o};o===alm_seo.previousUrl||alm_seo.fromPopstate||("function"==typeof window.history.pushState&&(alm_seo.controls?history.pushState(a,window.location.title,o):history.replaceState(a,window.location.title,o),"function"==typeof ajaxloadmore.analytics&&ajaxloadmore.analytics()),alm_seo.previousUrl=o),alm_seo.getRelLinks(e,o),alm_seo.fromPopstate=!1},alm_seo.onpopstate=function(e){if(alm_seo.nested)return!1;if(document.querySelector('.alm-listing[data-seo="true"]')||document.querySelector('.alm-comments[data-seo="true"]'))if(alm_seo.paging){if("function"==typeof almSetCurrentPage&&"function"==typeof almGetParentContainer&&"function"==typeof almGetObj){var o=e.state,a=window.almGetParentContainer(),t=window.almGetObj();o=null===o?alm_seo.defaultPage:e.state.page,alm_seo.fromPopstate=!0,"function"==typeof almSetCurrentPage&&window.almSetCurrentPage(o,a,t)}}else alm_seo.fromPopstate=!0,alm_seo.getPageState(e.state)},window.addEventListener("popstate",(function(e){if("function"==typeof window.history.pushState){var o=document.documentElement.scrollTop||document.body.scrollTop;document.body.scrollTop=o,alm_seo.onpopstate(e)}})),alm_seo.removeRelLink=function(e){e&&e.parentNode.removeChild(e)},alm_seo.getPageState=function(e){var o;o=null===e||""===e?-1:e.page,(document.querySelector('.alm-listing[data-seo="true"]')||document.querySelector('.alm-comments[data-seo="true"]'))&&alm_seo.scrollToPage(o)},alm_seo.scrollToPage=function(e){if(e=void 0===e||""===e||"-1"===e||-1===e?alm_seo.first.dataset.page:e,alm_seo.isAnimating)return!1;alm_seo.isAnimating=!0;var o=document.querySelector('.alm-seo[data-page="'+e+'"]');if(o){var a=("function"==typeof ajaxloadmore.getOffset?ajaxloadmore.getOffset(o).top:o.offsetTop)-alm_seo.scrolltop+5;alm_seo.init||alm_seo.fromPopstate?setTimeout((function(){window.scrollTo(0,a),alm_seo.fromPopstate=!1}),5):"function"==typeof ajaxloadmore.almScroll?ajaxloadmore.almScroll(a):window.scrollTo({top:a,behavior:"smooth"})}setTimeout((function(){alm_seo.isAnimating=!1}),250)},alm_seo.getRelLinks=function(e,o){e=parseInt(e);var a=parseInt(e)-1,t=parseInt(e)+1;alm_seo.setRelLink(a,o,"prev"),alm_seo.setRelLink(t,o,"next")},alm_seo.setRelLink=function(e,o,a){var t=document.querySelector('link[rel="'+a+'"]');if("next"===a&&alm_seo.totalpages<e)return alm_seo.removeRelLink(t),!1;if(e>=1){var l=alm_seo.getURL(e,0,o);t?t.href=l:((t=document.createElement("link")).href=l,t.rel=a,document.getElementsByTagName("head")[0].appendChild(t))}else alm_seo.removeRelLink(t)},alm_seo.cleanURL=function(e){var o=e.indexOf("#");return e=o>0?e.substring(0,o):e},alm_seo.getQueryVariable=function(e){for(var o=window.location.search.substring(1).split("&"),a=0;a<o.length;a++){var t=o[a].split("=");if(decodeURIComponent(t[0])==e)return decodeURIComponent(t[1])}return!1};
