var almNextpage={};(function(){almNextpage.init=true;almNextpage.urls=true;almNextpage.pageviews=true;almNextpage.animating=false;almNextpage.scroll=false;almNextpage.popstate=false;almNextpage.firstpage=1;almNextpage.offset=30;almNextpage.active=false;almNextpage.paging=true;almNextpage.previousUrl=window.location.href;almNextpage.fromPopstate=false;almNextpage.timer=null;almNextpage.nested=false;almNextpage.first=document.querySelector('.alm-listing[data-nextpage="true"] .alm-nextpage:first-child');almNextpage.wrap=document.querySelector('.alm-listing[data-nextpage="true"]');almNextpage.isIE=(navigator.appVersion.indexOf("MSIE 10")!==-1)?true:false;almNextpage.setup=function(el,container){almNextpage.nested=(container.dataset.nested==='true')?true:false;if(almNextpage.nested)return false;if(el.dataset.nextpage==='true'&&el.dataset.paging!=='true'){almNextpage.paging=false;almNextpage.active=true;almNextpage.scrollOptions=el.dataset.nextpageScroll;almNextpage.scrollOptions=almNextpage.scrollOptions.split(':');almNextpage.scroll=(almNextpage.scrollOptions[0]==='false'||almNextpage.scrollOptions[0]==='0')?false:true;almNextpage.offset=(almNextpage.scrollOptions[1])?parseInt(almNextpage.scrollOptions[1]):almNextpage.offset;almNextpage.urls=el.dataset.nextpageUrls;almNextpage.urls=(almNextpage.urls=="true");almNextpage.pageviews=el.dataset.nextpagePageviews;almNextpage.pageviews=(almNextpage.pageviews=="true");var startPage=parseInt(el.dataset.nextpageStartpage);if(startPage>1){almNextpage.popstate=almNextpage.fromPopstate=true;var target=document.querySelector('.alm-nextpage[data-id="'+parseInt(startPage)+'"]');if(target){var offset=(typeof ajaxloadmore.getOffset==='function')?ajaxloadmore.getOffset(target).top:target.offsetTop;var top=offset-parseInt(almNextpage.offset)+1;if(almNextpage.fromPopstate){window.scrollTo(0,top);almNextpage.fromPopstate=false;}else{almNextpage.doScroll(top);}
setTimeout(function(){almNextpage.popstate=false;},250);}}}};if(almNextpage.first){var almListing=document.querySelector('.alm-listing[data-nextpage="true"]');if(almListing){var almWrapper=almListing.parentNode;almNextpage.setup(almListing,almWrapper);}}
window.almSetNextPageVars=function(alm){almNextpage.paging=alm.addons.paging;if(alm.listing.dataset.nextpage==='true'){almNextpage.active=true;}};almNextpage.onScroll=function(){var scrollTop=window.pageYOffset;if(almNextpage.active&&!almNextpage.popstate&&scrollTop>1&&!almNextpage.paging){if(almNextpage.timer){window.clearTimeout(almNextpage.timer);}
almNextpage.timer=window.setTimeout(function(){var fromTop=scrollTop+almNextpage.offset;var posts=document.querySelectorAll('.alm-nextpage');var url=window.location.href;var current=Array.prototype.filter.call(posts,function(n,i){if(typeof ajaxloadmore.getOffset==='function'){var divOffset=ajaxloadmore.getOffset(n);if(divOffset.top<fromTop){return n;}}});var currentPost=current[current.length-1];var permalink=(currentPost)?currentPost.dataset.url:'';var id=(currentPost)?currentPost.dataset.id:'';if(id===undefined||id===''){id=almNextpage.first.dataset.id;permalink=almNextpage.first.dataset.url;}
if(url!==permalink){almNextpage.setURL(id,permalink,false);}},15);}};window.addEventListener('touchstart',almNextpage.onScroll);window.addEventListener('scroll',almNextpage.onScroll);window.almSetNextPage=function(alm){almNextpage.active=true;almNextpage.paging=alm.addons.paging;almNextpage.btnWrap=alm.btnWrap[0];if(alm.addons.paging){almNextpage.firstpage=alm.listing.dataset.nextpageStartpage;}
if(almNextpage.init){almNextpage.urls=(alm.addons.nextpage_urls=="true");almNextpage.canonical_url=alm.canonical_url;almNextpage.startpage=parseInt(alm.addons.nextpage_startpage);almNextpage.pageviews=alm.addons.nextpage_pageviews;almNextpage.pageviews=(almNextpage.pageviews=='true')?true:false;almNextpage.scrollOptions=alm.addons.nextpage_scroll;almNextpage.scrollOptions=almNextpage.scrollOptions.split(':');almNextpage.scroll=(almNextpage.scrollOptions[0]==='false'||almNextpage.scrollOptions[0]==='0')?false:true;almNextpage.offset=(almNextpage.scrollOptions[1])?parseInt(almNextpage.scrollOptions[1]):almNextpage.offset;almNextpage.init=false;}
if(almNextpage.scroll&&!almNextpage.paging){almNextpage.fromPopstate=almNextpage.popstate=false;almNextpage.scrollToPage(alm.page);}
if(almNextpage.paging){almNextpage.setURL(parseInt(alm.page)+1,almNextpage.canonical_url,true);}};almNextpage.onpopstate=function(event){var page;if(almNextpage.nested||!almNextpage.active){return false;}
almNextpage.popstate=almNextpage.fromPopstate=true;if(event.state){page=event.state.pageID;page=(page===''||page===null)?1:page;}else{if(almNextpage.paging){page=almNextpage.firstpage;}else{page=almNextpage.first.dataset.id;}}
if(almNextpage.paging){var button=almNextpage.btnWrap.querySelector('li.num a[data-page="'+parseInt(page)+'"]');if(button){button.click();}}else{var target=almNextpage.getElementByPage(page);if(target){var offset=(typeof ajaxloadmore.getOffset==='function')?ajaxloadmore.getOffset(target).top:target.offsetTop;var top=offset-almNextpage.offset+1;setTimeout(function(){window.scrollTo(0,top);},5);}}};window.addEventListener('popstate',function(event){if(typeof window.history.pushState=='function'){almNextpage.onpopstate(event);}});almNextpage.setURL=function(pageID,permalink,is_paging){if(almNextpage.nested)return false;if(almNextpage.urls){var state={pageID:pageID,permalink:permalink};if(is_paging){if(pageID>1){permalink=permalink+window.alm_nextpage_localize.leading_slash+pageID+window.alm_nextpage_localize.trailing_slash;}else{permalink=permalink;}}
if(permalink!==almNextpage.previousUrl&&!almNextpage.fromPopstate){if(typeof window.history.pushState==='function'&&!almNextpage.isIE){history.pushState(state,window.location.title,permalink);if(typeof almUrlUpdate==='function'){window.almUrlUpdate(permalink,'nextpage');}}
almNextpage.sendPageview();almNextpage.previousUrl=permalink;}
almNextpage.fromPopstate=almNextpage.popstate=false;}};almNextpage.setPageTitle=function(title){if(almSinglePosts.titleTemplate===''){document.title=document.title;}else{var str=almSinglePosts.titleTemplate;str=str.replace('{site-title}',almSinglePosts.siteTitle);str=str.replace('{tagline}',almSinglePosts.siteTagline);str=str.replace('{post-title}',title);document.title=str;}};almNextpage.sendPageview=function(){if(almNextpage.pageviews){var path=window.location.pathname;if(typeof ajaxloadmore.tracking==='function'){ajaxloadmore.tracking(path);}else{if(typeof gtag==='function'){gtag('event','page_view',{'page_path':path});}
if(typeof ga==='function'){ga('send','pageview',path);}
if(typeof __gaTracker==='function'){__gaTracker('send','pageview',path);}}}};almNextpage.scrollToPage=function(page){if(almNextpage.nested)return false;page=(almNextpage.paging)?parseInt(page)+1:(page+almNextpage.startpage)+1;var target=(almNextpage.paging)?almNextpage.wrap:almNextpage.getElementByPage(page);if(target){var offset=(typeof ajaxloadmore.getOffset==='function')?ajaxloadmore.getOffset(target).top:target.offsetTop;var top=offset-almNextpage.offset+1;if(almNextpage.paging){almNextpage.doScroll(top);}else{if(almNextpage.fromPopstate){setTimeout(function(){window.scrollTo(0,top);almNextpage.fromPopstate=false;},5);}else{almNextpage.doScroll(top);}}}};almNextpage.doScroll=function(top){if(!top){return false;}
if(typeof ajaxloadmore.almScroll==='function'){ajaxloadmore.almScroll(top);}else{window.scrollTo({top:top,behavior:'smooth'});}};almNextpage.getElementByPage=function(page){if(page){var target=document.querySelector('.alm-listing[data-nextpage="true"] .alm-nextpage[data-id="'+parseInt(page)+'"]');return(target)?target:'';}};})();